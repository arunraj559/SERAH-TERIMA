<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SERAH TERIMA CS LINE TVTOTO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { box-sizing: border-box; }
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden border border-purple-100">
            
            <!-- Header -->
            <div class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 p-8 text-white">
                <div class="flex items-center gap-3 mb-3">
                    <span class="text-4xl">âœ¨</span>
                    <h1 class="text-4xl font-bold">SERAH TERIMA CS LINE TVTOTO</h1>
                </div>
                <p class="text-purple-100 text-lg">Centang tugas â†’ Tambah kendala â†’ Auto rapi & tersimpan! ğŸš€</p>
            </div>

            <!-- Content -->
            <div class="p-8">
                
                <!-- CS Name & Shift -->
                <div class="mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border-2 border-blue-200">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">ğŸ‘¤ Nama CS</label>
                            <input type="text" id="csName" value="Arun Raj" class="w-full p-3 border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none font-semibold text-lg" placeholder="Masukkan nama CS...">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">ğŸ• Shift</label>
                            <select id="shift" class="w-full p-3 border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none font-semibold text-lg bg-white">
                                <option value="Pagi">Pagi</option>
                                <option value="Sore">Sore</option>
                                <option value="Malam">Malam</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Checklist -->
                <div class="mb-6 bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border-2 border-green-200">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold text-gray-800">ğŸ“‹ Checklist Tugas Harian</h2>
                        <span class="text-sm text-gray-600 bg-white px-3 py-1 rounded-full">Klik untuk toggle âœ…/âŒ</span>
                    </div>
                    <div id="checklistContainer" class="grid grid-cols-1 md:grid-cols-2 gap-3"></div>
                </div>

                <!-- Input & Output -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    
                    <!-- Input Section -->
                    <div>
                        <div class="mb-4 flex justify-between items-center">
                            <label class="block text-gray-700 font-bold text-lg">ğŸ“¥ Paste Kendala</label>
                            <span id="kendalaCounter" class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-semibold hidden">0 kendala tersimpan</span>
                        </div>
                        <textarea id="rawInput" placeholder="Paste kendala di sini...&#10;&#10;Contoh:&#10;wd bca RIFAL HERIANA&#10;RED TIGER DRAGON PEARL error&#10;Telkomsel gangguan" class="w-full h-64 p-4 border-2 border-gray-300 rounded-xl focus:border-purple-500 focus:outline-none resize-none font-mono text-sm shadow-inner bg-gray-50"></textarea>
                        
                        <div class="grid grid-cols-2 gap-3 mt-4">
                            <button onclick="addComplaints()" class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white py-4 px-6 rounded-xl font-bold text-lg hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 transition-all duration-300 shadow-lg hover:shadow-xl">
                                â• Tambah Kendala
                            </button>
                            <button onclick="resetAll()" class="bg-red-500 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-red-600 transition-all duration-300 shadow-lg hover:shadow-xl">
                                ğŸ—‘ï¸ Reset Semua
                            </button>
                        </div>

                        <div class="mt-4 bg-gradient-to-r from-blue-50 to-cyan-50 border-l-4 border-blue-500 p-4 rounded-lg">
                            <p class="text-sm font-bold text-blue-800 mb-2">ğŸ’¡ Cara Pakai:</p>
                            <ul class="text-xs text-blue-700 space-y-1">
                                <li>1ï¸âƒ£ Centang/uncentang tugas yang sudah/belum selesai</li>
                                <li>2ï¸âƒ£ Paste kendala â†’ Klik "Tambah Kendala"</li>
                                <li>3ï¸âƒ£ Input otomatis clear, kendala tersimpan!</li>
                                <li>4ï¸âƒ£ Ulangi untuk tambah kendala lagi</li>
                                <li>5ï¸âƒ£ Salin hasil report yang sudah rapi!</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Output Section -->
                    <div>
                        <div class="mb-4 flex justify-between items-center">
                            <label class="block text-gray-700 font-bold text-lg">ğŸ“¤ Hasil Report</label>
                            <button id="copyBtn" onclick="copyToClipboard()" class="hidden items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-5 py-3 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all font-semibold shadow-lg">
                                ğŸ“‹ Salin Hasil
                            </button>
                        </div>
                        <textarea id="output" readonly placeholder="Hasil report akan muncul di sini...&#10;&#10;Kendala yang ditambahkan akan tersimpan rapi dengan spasi otomatis! ğŸ‰" class="w-full h-96 p-4 border-2 border-gray-300 rounded-xl bg-gradient-to-br from-gray-50 to-blue-50 font-mono text-sm resize-none shadow-inner"></textarea>
                        
                        <div id="successMsg" class="hidden mt-4 bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 p-4 rounded-lg">
                            <p class="text-green-700 font-semibold">âœ… Report siap! Klik "Salin Hasil" untuk copy.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="bg-gradient-to-r from-gray-50 to-blue-50 p-6 border-t border-gray-200">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div class="bg-white p-4 rounded-xl shadow-md border-2 border-blue-100">
                        <div class="text-3xl mb-2">ğŸ”„</div>
                        <div class="text-xs font-semibold text-gray-700">Auto Clear Input</div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-md border-2 border-purple-100">
                        <div class="text-3xl mb-2">ğŸ’¾</div>
                        <div class="text-xs font-semibold text-gray-700">Auto Save Kendala</div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-md border-2 border-pink-100">
                        <div class="text-3xl mb-2">ğŸ“</div>
                        <div class="text-xs font-semibold text-gray-700">Auto Spasi Rapi</div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-md border-2 border-green-100">
                        <div class="text-3xl mb-2">â•</div>
                        <div class="text-xs font-semibold text-gray-700">Tambah Berkali-kali</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data State
        let savedComplaints = { bank: [], provider: [], game: [], lainnya: [] };
        
        const checklist = [
            { text: 'Channel WA Prediksi pasaran besar setiap hari 1x', checked: true },
            { text: 'Syair / Prediksi', checked: true },
            { text: 'Kemenangan Besar diatas 30Jt 1x', checked: true },
            { text: 'Kemenangan Besar diatas 30Jt 2x', checked: true },
            { text: 'Link Alternatif Seminggu 1x', checked: true },
            { text: 'Wordpress Syair', checked: true },
            { text: 'Facebook Posting Mingguan (Selasa & Jumat)', checked: false },
            { text: 'Maintenance', checked: false },
            { text: 'Perubahan Jadwal Pasaran', checked: false },
            { text: 'Posting Mingguan rutin (Selasa & Jumat)', checked: false },
            { text: 'Info Penting Keterlambatan Result', checked: false },
            { text: 'Wordpress Kemenangan besar di atas 80jt', checked: false }
        ];

        const KEYWORDS = {
            bank: ['bca', 'mandiri', 'bni', 'bri', 'cimb', 'danamon', 'permata', 'bank', 'transfer', 'rekening', 'deposit', 'withdraw', 'wd', 'depo', 'tarik dana', 'setor', 'mutasi', 'saldo'],
            provider: ['telkomsel', 'indosat', 'xl', 'tri', 'smartfren', 'axis', 'provider', 'pulsa', 'sinyal', 'jaringan', 'internet'],
            game: ['slot', 'pragmatic', 'pg soft', 'habanero', 'spadegaming', 'joker', 'cq9', 'microgaming', 'playtech', 'gacor', 'game', 'permainan', 'jackpot', 'rtp', 'scatter', 'spin', 'bonus', 'freespin', 'gates of olympus', 'starlight princess', 'sweet bonanza', 'wild west', 'mahjong', 'higgs domino', 'red tiger', 'dragon pearl', 'jmarble', 'marble race', 'fever marble', 'tidak bisa dimainkan', 'error game', 'game error', 'stuck']
        };

        // Initialize Checklist
        function initChecklist() {
            const container = document.getElementById('checklistContainer');
            container.innerHTML = '';
            
            checklist.forEach((item, index) => {
                const btn = document.createElement('button');
                btn.className = `flex items-center gap-3 p-3 rounded-lg border-2 transition-all text-left ${
                    item.checked ? 'bg-green-100 border-green-400 hover:bg-green-200' : 'bg-red-50 border-red-300 hover:bg-red-100'
                }`;
                btn.onclick = () => toggleCheck(index);
                
                const icon = document.createElement('span');
                icon.className = `text-2xl flex-shrink-0`;
                icon.textContent = item.checked ? 'âœ…' : 'âŒ';
                
                const text = document.createElement('span');
                text.className = `text-sm font-medium ${item.checked ? 'text-green-800' : 'text-red-700'}`;
                text.textContent = item.text;
                
                btn.appendChild(icon);
                btn.appendChild(text);
                container.appendChild(btn);
            });
        }

        function toggleCheck(index) {
            checklist[index].checked = !checklist[index].checked;
            initChecklist();
            generateFinalReport();
        }

        function detectCategory(text) {
            const lowerText = text.toLowerCase();
            if (KEYWORDS.bank.some(kw => lowerText.includes(kw))) return 'bank';
            if (KEYWORDS.game.some(kw => lowerText.includes(kw))) return 'game';
            if (KEYWORDS.provider.some(kw => lowerText.includes(kw))) return 'provider';
            return 'lainnya';
        }

        function extractComplaints(text) {
            const complaints = { bank: [], provider: [], game: [], lainnya: [] };
            const lines = text.split('\n');
            const defaultKeywords = ['posting mingguan', 'maintenance', 'perubahan jadwal', 'prediksi', 'syair', 'kemenangan besar', 'link alternatif', 'keterlambatan result'];
            
            lines.forEach(line => {
                const cleaned = line.trim().toLowerCase();
                if (!cleaned || cleaned.length < 5) return;
                if (defaultKeywords.some(kw => cleaned.includes(kw))) return;
                if (cleaned.match(/^(facebook|channel wa|wordpress|link)/)) return;
                if (cleaned.startsWith('http')) return;
                if (cleaned.match(/^[âœ…âŒ=\s>"-]+$/)) return;
                
                const category = detectCategory(line);
                const originalLine = line.replace(/^[>\s"-]+/, '').trim();
                if (originalLine && originalLine.length > 5) {
                    complaints[category].push(originalLine);
                }
            });
            
            return complaints;
        }

        function addComplaints() {
            const rawInput = document.getElementById('rawInput');
            const text = rawInput.value.trim();
            
            if (!text) {
                generateFinalReport();
                return;
            }

            const newComplaints = extractComplaints(text);
            savedComplaints.bank = [...savedComplaints.bank, ...newComplaints.bank];
            savedComplaints.provider = [...savedComplaints.provider, ...newComplaints.provider];
            savedComplaints.game = [...savedComplaints.game, ...newComplaints.game];
            savedComplaints.lainnya = [...savedComplaints.lainnya, ...newComplaints.lainnya];
            
            rawInput.value = '';
            updateCounter();
            generateFinalReport();
        }

        function generateFinalReport() {
            const csName = document.getElementById('csName').value;
            const shift = document.getElementById('shift').value;
            const rawInput = document.getElementById('rawInput').value;
            
            const linkMatch = rawInput.match(/https?:\/\/[^\s]+/);
            const link = linkMatch ? linkMatch[0] : '';

            const checked = checklist.filter(i => i.checked).map(i => i.text);
            const unchecked = checklist.filter(i => !i.checked).map(i => i.text);

            let result = `Nama CS : ${csName}\nShift : ${shift}\n\nLink & YT aman : ${link}\n\n`;
            
            if (checked.length > 0) result += `âœ… ${checked.join('\nâœ… ')}\n\n`;
            if (unchecked.length > 0) result += `âŒ ${unchecked.join('\nâŒ ')}\n\n`;
            
            if (savedComplaints.bank.length > 0) {
                result += `ğŸ¦ KENDALA BANK:\n`;
                savedComplaints.bank.forEach(i => result += `  â€¢ ${i}\n`);
                result += '\n';
            }
            if (savedComplaints.game.length > 0) {
                result += `ğŸ® KENDALA GAME:\n`;
                savedComplaints.game.forEach(i => result += `  â€¢ ${i}\n`);
                result += '\n';
            }
            if (savedComplaints.provider.length > 0) {
                result += `ğŸ“± KENDALA PROVIDER:\n`;
                savedComplaints.provider.forEach(i => result += `  â€¢ ${i}\n`);
                result += '\n';
            }
            if (savedComplaints.lainnya.length > 0) {
                result += `âš ï¸ KENDALA LAINNYA:\n`;
                savedComplaints.lainnya.forEach(i => result += `  â€¢ ${i}\n`);
            }

            document.getElementById('output').value = result;
            document.getElementById('copyBtn').classList.remove('hidden');
            document.getElementById('copyBtn').classList.add('flex');
            document.getElementById('successMsg').classList.remove('hidden');
        }

        function copyToClipboard() {
            const output = document.getElementById('output');
            output.select();
            document.execCommand('copy');
            
            const btn = document.getElementById('copyBtn');
            btn.innerHTML = 'âœ… Tersalin!';
            setTimeout(() => {
                btn.innerHTML = 'ğŸ“‹ Salin Hasil';
            }, 2000);
        }

        function resetAll() {
            document.getElementById('rawInput').value = '';
            document.getElementById('output').value = '';
            savedComplaints = { bank: [], provider: [], game: [], lainnya: [] };
            updateCounter();
            document.getElementById('copyBtn').classList.add('hidden');
            document.getElementById('successMsg').classList.add('hidden');
        }

        function updateCounter() {
            const total = Object.values(savedComplaints).reduce((sum, arr) => sum + arr.length, 0);
            const counter = document.getElementById('kendalaCounter');
            if (total > 0) {
                counter.textContent = `${total} kendala tersimpan`;
                counter.classList.remove('hidden');
            } else {
                counter.classList.add('hidden');
            }
        }

        // Initialize on load
        initChecklist();
        generateFinalReport();
    </script>
</body>
</html>
